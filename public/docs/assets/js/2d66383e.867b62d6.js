"use strict";(self.webpackChunksmartpad_docs=self.webpackChunksmartpad_docs||[]).push([[300],{8275(e,i,n){n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"specs/plotting-and-dependency-views","title":"Plotting and Dependency Views","description":"Specifies exploratory plotting, detached views, and dependency-driven visualization flows.","source":"@site/docs/specs/plotting-and-dependency-views.md","sourceDirName":"specs","slug":"/specs/plotting-and-dependency-views","permalink":"/docs/specs/plotting-and-dependency-views","draft":false,"unlisted":false,"editUrl":"https://github.com/nmaxcom/SmartPad/tree/main/website/docs/specs/plotting-and-dependency-views.md","tags":[],"version":"current","frontMatter":{"title":"Plotting and Dependency Views","description":"Specifies exploratory plotting, detached views, and dependency-driven visualization flows."},"sidebar":"docsSidebar","previous":{"title":"Result Chips and References","permalink":"/docs/specs/result-chips-and-references"},"next":{"title":"Currency and FX","permalink":"/docs/specs/currency-and-fx"}}');var l=n(4848),r=n(8453);const d={title:"Plotting and Dependency Views",description:"Specifies exploratory plotting, detached views, and dependency-driven visualization flows."},t=void 0,c={},a=[{value:"At a glance",id:"at-a-glance",level:2},{value:"Quick examples",id:"quick-examples",level:2},{value:"Happy path",id:"happy-path",level:3},{value:"What this covers",id:"what-this-covers",level:2},{value:"Full specification",id:"full-specification",level:2},{value:"0. Purpose",id:"0-purpose",level:2},{value:"1. Core Philosophy &amp; Non-Negotiables",id:"1-core-philosophy--non-negotiables",level:2},{value:"1.1 Results are first-class, even if unnamed",id:"11-results-are-first-class-even-if-unnamed",level:3},{value:"1.2 Everything after <code>=&gt;</code> is flowy and brittle \u2014 and that\u2019s OK",id:"12-everything-after--is-flowy-and-brittle--and-thats-ok",level:3},{value:"1.3 Text is the source of truth",id:"13-text-is-the-source-of-truth",level:3},{value:"2. Mental Model",id:"2-mental-model",level:2},{value:"2.1 What the user is doing",id:"21-what-the-user-is-doing",level:3},{value:"2.2 What a View Is",id:"22-what-a-view-is",level:3},{value:"3. High-Level UX Flow",id:"3-high-level-ux-flow",level:2},{value:"3.1 Entry point \u2014 clicking a result",id:"31-entry-point--clicking-a-result",level:3},{value:"3.2 Selection Mode (relationship picking)",id:"32-selection-mode-relationship-picking",level:3},{value:"3.3 Transient exploration plot",id:"33-transient-exploration-plot",level:3},{value:"3.4 Scrubbing (already existing behavior)",id:"34-scrubbing-already-existing-behavior",level:3},{value:"4. Persistent Views (Detached Views)",id:"4-persistent-views-detached-views",level:2},{value:"4.1 Why detached views exist",id:"41-why-detached-views-exist",level:3},{value:"4.2 View syntax",id:"42-view-syntax",level:3},{value:"5. Mini-Grammar for <code>@view</code>",id:"5-mini-grammar-for-view",level:2},{value:"5.1 General form",id:"51-general-form",level:3},{value:"5.2 Supported fields (v1)",id:"52-supported-fields-v1",level:3},{value:"5.3 Examples",id:"53-examples",level:3},{value:"6. Binding Rules",id:"6-binding-rules",level:2},{value:"6.1 How a view binds",id:"61-how-a-view-binds",level:3},{value:"6.2 If the previous line changes",id:"62-if-the-previous-line-changes",level:3},{value:"7. View Lifecycle States",id:"7-view-lifecycle-states",level:2},{value:"7.1 Connected",id:"71-connected",level:3},{value:"7.2 Disconnected",id:"72-disconnected",level:3},{value:"7.3 Reconnection Mode",id:"73-reconnection-mode",level:3},{value:"8. Domain Inference Rules",id:"8-domain-inference-rules",level:2},{value:"8.1 Explicit domain always wins",id:"81-explicit-domain-always-wins",level:3},{value:"8.2 Auto domain inference (deterministic)",id:"82-auto-domain-inference-deterministic",level:3},{value:"8.3 Invalid regions",id:"83-invalid-regions",level:3},{value:"9. Pan &amp; Zoom",id:"9-pan--zoom",level:2},{value:"9.1 Conceptual separation",id:"91-conceptual-separation",level:3},{value:"9.2 Interaction",id:"92-interaction",level:3},{value:"9.3 Persistence rules",id:"93-persistence-rules",level:3},{value:"9.4 Freeze / Commit actions",id:"94-freeze--commit-actions",level:3},{value:"10. Chart Size",id:"10-chart-size",level:2},{value:"10.1 Sizes",id:"101-sizes",level:3},{value:"10.2 Resizing interaction",id:"102-resizing-interaction",level:3},{value:"11. Multiple Series &amp; Lists",id:"11-multiple-series--lists",level:2},{value:"11.1 Lists",id:"111-lists",level:3},{value:"11.2 Multi-series (future-safe)",id:"112-multi-series-future-safe",level:3},{value:"12. Performance &amp; Reactivity",id:"12-performance--reactivity",level:2},{value:"13. Non-Goals (Explicit)",id:"13-non-goals-explicit",level:2},{value:"14. Success Criteria",id:"14-success-criteria",level:2},{value:"FAQ",id:"faq",level:2},{value:"Possible Confusion: clicking vs @view syntax \u2014 do they both \u201cdeclare a view\u201d?",id:"possible-confusion-clicking-vs-view-syntax--do-they-both-declare-a-view",level:3},{value:"15. Summary",id:"15-summary",level:2}];function o(e){const i={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components},{Details:n}=i;return n||function(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i.blockquote,{children:["\n",(0,l.jsxs)(i.p,{children:["Source: ",(0,l.jsx)(i.code,{children:"docs/Specs/Plotting.spec.md"})]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"at-a-glance",children:"At a glance"}),"\n",(0,l.jsx)(i.p,{children:"Specifies exploratory plotting, detached views, and dependency-driven visualization flows."}),"\n",(0,l.jsx)(i.h2,{id:"quick-examples",children:"Quick examples"}),"\n",(0,l.jsx)(i.h3,{id:"happy-path",children:"Happy path"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"a + b => 20%\n"})}),"\n",(0,l.jsx)(i.h2,{id:"what-this-covers",children:"What this covers"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"0",children:["\n",(0,l.jsx)(i.li,{children:"Purpose"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsx)(i.li,{children:"Core Philosophy & Non-Negotiables"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"2",children:["\n",(0,l.jsx)(i.li,{children:"Mental Model"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"3",children:["\n",(0,l.jsx)(i.li,{children:"High-Level UX Flow"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"4",children:["\n",(0,l.jsx)(i.li,{children:"Persistent Views (Detached Views)"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"5",children:["\n",(0,l.jsxs)(i.li,{children:["Mini-Grammar for ",(0,l.jsx)(i.code,{children:"@view"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"6",children:["\n",(0,l.jsx)(i.li,{children:"Binding Rules"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"7",children:["\n",(0,l.jsx)(i.li,{children:"View Lifecycle States"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"8",children:["\n",(0,l.jsx)(i.li,{children:"Domain Inference Rules"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.ol,{start:"9",children:["\n",(0,l.jsx)(i.li,{children:"Pan & Zoom"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"full-specification",children:"Full specification"}),"\n",(0,l.jsxs)(n,{children:[(0,l.jsx)("summary",{children:"Open full spec: Smartpad \u2014 Interactive Dependency Views (Plotting & Exploration)"}),(0,l.jsxs)(i.p,{children:["Alright. Below is a ",(0,l.jsx)(i.strong,{children:"complete, self-contained specification"})," for the feature, written as if it were the ",(0,l.jsx)(i.strong,{children:"only document an engineer/designer will ever see"}),".\nIt includes philosophy, UX, syntax, states, rules, edge cases, and implementation notes.\nNo open questions, no \u201cask later\u201d. This is ",(0,l.jsx)(i.em,{children:"the"})," source of truth."]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h1,{id:"smartpad--interactive-dependency-views-plotting--exploration",children:"Smartpad \u2014 Interactive Dependency Views (Plotting & Exploration)"}),(0,l.jsx)(i.h2,{id:"0-purpose",children:"0. Purpose"}),(0,l.jsxs)(i.p,{children:["This feature enables ",(0,l.jsx)(i.strong,{children:"direct, playful exploration of quantitative relationships"})," inside Smartpad documents."]}),(0,l.jsx)(i.p,{children:"It allows users to:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Visually explore how a computed result depends on its inputs"}),"\n",(0,l.jsx)(i.li,{children:"Scrub existing variables and see immediate visual feedback"}),"\n",(0,l.jsxs)(i.li,{children:["Persist exploratory visualizations as ",(0,l.jsx)(i.strong,{children:"detached views"})," in the document"]}),"\n",(0,l.jsx)(i.li,{children:"Recover gracefully from document edits, errors, and re-wiring"}),"\n"]}),(0,l.jsxs)(i.p,{children:["This is ",(0,l.jsx)(i.strong,{children:"not a charting feature"}),".\nIt is a ",(0,l.jsx)(i.strong,{children:"relationship inspection system"})," designed to preserve Smartpad\u2019s core philosophy:"]}),(0,l.jsxs)(i.blockquote,{children:["\n",(0,l.jsx)(i.p,{children:(0,l.jsx)(i.em,{children:"Write how you think. Explore without friction. Commit insight only when useful."})}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"1-core-philosophy--non-negotiables",children:"1. Core Philosophy & Non-Negotiables"}),(0,l.jsx)(i.h3,{id:"11-results-are-first-class-even-if-unnamed",children:"1.1 Results are first-class, even if unnamed"}),(0,l.jsxs)(i.p,{children:["Any computed result (including inline results after ",(0,l.jsx)(i.code,{children:"=>"}),") is a valid exploration target."]}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"a + b => 20%\n"})}),(0,l.jsx)(i.p,{children:"This result is:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"clickable"}),"\n",(0,l.jsx)(i.li,{children:"explorable"}),"\n",(0,l.jsx)(i.li,{children:"attachable to a persistent view"}),"\n"]}),(0,l.jsxs)(i.p,{children:["There is ",(0,l.jsx)(i.strong,{children:"no requirement"})," to assign results to variables."]}),(0,l.jsx)(i.hr,{}),(0,l.jsxs)(i.h3,{id:"12-everything-after--is-flowy-and-brittle--and-thats-ok",children:["1.2 Everything after ",(0,l.jsx)(i.code,{children:"=>"})," is flowy and brittle \u2014 and that\u2019s OK"]}),(0,l.jsx)(i.p,{children:"Smartpad embraces impermanence."}),(0,l.jsx)(i.p,{children:"Plots and views:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"must tolerate breakage"}),"\n",(0,l.jsx)(i.li,{children:"must never silently disappear"}),"\n",(0,l.jsx)(i.li,{children:"must offer explicit recovery paths"}),"\n"]}),(0,l.jsxs)(i.p,{children:["Brittleness is not a bug \u2014 ",(0,l.jsx)(i.strong,{children:"losing user intent is"}),"."]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"13-text-is-the-source-of-truth",children:"1.3 Text is the source of truth"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Variables are scrubbed in text (already existing behavior)"}),"\n",(0,l.jsx)(i.li,{children:"Plots never become the primary control surface"}),"\n",(0,l.jsxs)(i.li,{children:["Plots are ",(0,l.jsx)(i.em,{children:"views"}),", not controllers"]}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"2-mental-model",children:"2. Mental Model"}),(0,l.jsx)(i.h3,{id:"21-what-the-user-is-doing",children:"2.1 What the user is doing"}),(0,l.jsx)(i.p,{children:"The user is not \u201cplotting a function\u201d."}),(0,l.jsx)(i.p,{children:"They are answering:"}),(0,l.jsxs)(i.blockquote,{children:["\n",(0,l.jsxs)(i.p,{children:["\u201cHow does ",(0,l.jsx)(i.strong,{children:"this result"})," depend on ",(0,l.jsx)(i.strong,{children:"that value"}),"?\u201d"]}),"\n"]}),(0,l.jsxs)(i.p,{children:["This is called ",(0,l.jsx)(i.strong,{children:"dependency exploration"}),"."]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"22-what-a-view-is",children:"2.2 What a View Is"}),(0,l.jsxs)(i.p,{children:["A ",(0,l.jsx)(i.strong,{children:"View"})," is:"]}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"a declarative, persistent visualization"}),"\n",(0,l.jsx)(i.li,{children:"bound to a computed expression node"}),"\n",(0,l.jsx)(i.li,{children:"showing the relationship between that expression and one independent variable"}),"\n"]}),(0,l.jsx)(i.p,{children:"A View:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"survives edits"}),"\n",(0,l.jsx)(i.li,{children:"can disconnect"}),"\n",(0,l.jsx)(i.li,{children:"can be reconnected"}),"\n",(0,l.jsx)(i.li,{children:"is serialized in text"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"3-high-level-ux-flow",children:"3. High-Level UX Flow"}),(0,l.jsx)(i.h3,{id:"31-entry-point--clicking-a-result",children:"3.1 Entry point \u2014 clicking a result"}),(0,l.jsx)(i.p,{children:"Clickable targets:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"any derived variable"}),"\n",(0,l.jsxs)(i.li,{children:["any inline result after ",(0,l.jsx)(i.code,{children:"=>"})]}),"\n"]}),(0,l.jsx)(i.p,{children:"Hover affordance:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"subtle underline or glow"}),"\n",(0,l.jsxs)(i.li,{children:["tooltip: ",(0,l.jsx)(i.strong,{children:"\u201cExplore dependencies\u201d"})]}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"32-selection-mode-relationship-picking",children:"3.2 Selection Mode (relationship picking)"}),(0,l.jsxs)(i.p,{children:["Clicking a result enters ",(0,l.jsx)(i.strong,{children:"Selection Mode"}),":"]}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"All valid candidates highlight:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"numeric variables"}),"\n",(0,l.jsx)(i.li,{children:"dates"}),"\n",(0,l.jsx)(i.li,{children:"percentages"}),"\n",(0,l.jsx)(i.li,{children:"compatible results"}),"\n"]}),"\n"]}),"\n"]}),(0,l.jsx)(i.p,{children:"User flow:"}),(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["Click ",(0,l.jsx)(i.strong,{children:"result"})," (Y)"]}),"\n",(0,l.jsxs)(i.li,{children:["Click ",(0,l.jsx)(i.strong,{children:"independent variable"})," (X)"]}),"\n",(0,l.jsx)(i.li,{children:"Plot appears immediately"}),"\n"]}),(0,l.jsx)(i.p,{children:"No menus. No config dialogs."}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"33-transient-exploration-plot",children:"3.3 Transient exploration plot"}),(0,l.jsx)(i.p,{children:"When X is selected:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"A plot appears inline, below the expression"}),"\n",(0,l.jsx)(i.li,{children:"X = selected variable"}),"\n",(0,l.jsx)(i.li,{children:"Y = selected result"}),"\n",(0,l.jsx)(i.li,{children:"Domain inferred automatically"}),"\n",(0,l.jsx)(i.li,{children:"A dot marks the current value"}),"\n"]}),(0,l.jsxs)(i.p,{children:["This plot is ",(0,l.jsx)(i.strong,{children:"temporary"})," unless explicitly persisted."]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"34-scrubbing-already-existing-behavior",children:"3.4 Scrubbing (already existing behavior)"}),(0,l.jsx)(i.p,{children:"All variables are already scrubbable by dragging their unit/value."}),(0,l.jsx)(i.p,{children:"During scrubbing:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"plot updates live"}),"\n",(0,l.jsx)(i.li,{children:"dot moves"}),"\n",(0,l.jsx)(i.li,{children:"dependent results update"}),"\n"]}),(0,l.jsx)(i.p,{children:"Plots never introduce new scrubbing mechanics."}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"4-persistent-views-detached-views",children:"4. Persistent Views (Detached Views)"}),(0,l.jsx)(i.h3,{id:"41-why-detached-views-exist",children:"4.1 Why detached views exist"}),(0,l.jsx)(i.p,{children:"Exploration often yields insight worth keeping."}),(0,l.jsx)(i.p,{children:"Detached Views:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"persist independently of exploration state"}),"\n",(0,l.jsx)(i.li,{children:"survive document edits"}),"\n",(0,l.jsx)(i.li,{children:"are explicit, textual artifacts"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"42-view-syntax",children:"4.2 View syntax"}),(0,l.jsxs)(i.p,{children:["A persistent View is declared by an @view ",(0,l.jsx)(i.strong,{children:"annotation line"})," immediately following an expression:"]}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"estimated value = principal * (1 + annual return)^years => $29,507.27\n@view plot x=years\n"})}),(0,l.jsx)(i.p,{children:"This syntax:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"binds to the computed node of the line above"}),"\n",(0,l.jsxs)(i.li,{children:["does ",(0,l.jsx)(i.strong,{children:"not"})," use ",(0,l.jsx)(i.code,{children:"=>"})]}),"\n",(0,l.jsx)(i.li,{children:"produces no scalar result"}),"\n",(0,l.jsx)(i.li,{children:"renders a plot block below it"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsxs)(i.h2,{id:"5-mini-grammar-for-view",children:["5. Mini-Grammar for ",(0,l.jsx)(i.code,{children:"@view"})]}),(0,l.jsx)(i.h3,{id:"51-general-form",children:"5.1 General form"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:"@view <kind> <params>\n"})}),(0,l.jsx)(i.p,{children:"Where:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"@view"})," is a reserved directive"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"<kind>"})," defaults to ",(0,l.jsx)(i.code,{children:"plot"})," if omitted"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"<params>"})," are key=value pairs (space-separated)"]}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"52-supported-fields-v1",children:"5.2 Supported fields (v1)"}),(0,l.jsxs)(i.table,{children:[(0,l.jsx)(i.thead,{children:(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.th,{children:"Field"}),(0,l.jsx)(i.th,{children:"Required"}),(0,l.jsx)(i.th,{children:"Description"})]})}),(0,l.jsxs)(i.tbody,{children:[(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"kind"})}),(0,l.jsx)(i.td,{children:"no"}),(0,l.jsxs)(i.td,{children:[(0,l.jsx)(i.code,{children:"plot"}),", ",(0,l.jsx)(i.code,{children:"scatter"}),", ",(0,l.jsx)(i.code,{children:"hist"}),", ",(0,l.jsx)(i.code,{children:"box"}),", ",(0,l.jsx)(i.code,{children:"auto"})]})]}),(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"x"})}),(0,l.jsx)(i.td,{children:"no"}),(0,l.jsx)(i.td,{children:"Independent variable (symbol name)"})]}),(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"domain"})}),(0,l.jsx)(i.td,{children:"no"}),(0,l.jsx)(i.td,{children:"Semantic domain of X"})]}),(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"view"})}),(0,l.jsx)(i.td,{children:"no"}),(0,l.jsx)(i.td,{children:"X viewport (pan/zoom state)"})]}),(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"ydomain"})}),(0,l.jsx)(i.td,{children:"no"}),(0,l.jsx)(i.td,{children:"Semantic domain of Y"})]}),(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"yview"})}),(0,l.jsx)(i.td,{children:"no"}),(0,l.jsx)(i.td,{children:"Y viewport (pan/zoom state)"})]}),(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"size"})}),(0,l.jsx)(i.td,{children:"no"}),(0,l.jsxs)(i.td,{children:[(0,l.jsx)(i.code,{children:"sm"}),", ",(0,l.jsx)(i.code,{children:"md"}),", ",(0,l.jsx)(i.code,{children:"lg"}),", ",(0,l.jsx)(i.code,{children:"xl"})]})]})]})]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"53-examples",children:"5.3 Examples"}),(0,l.jsx)(i.p,{children:"Basic:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"@view plot x=years\n"})}),(0,l.jsx)(i.p,{children:"Multiple series (comma-separated):"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"f = 2*x + 1\ng = x^2\n@view plot x=x y=f,g\n"})}),(0,l.jsx)(i.p,{children:"Multiple series with spaces (quote the value or rely on space-tolerant parsing):"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:'f = 2*x + 1\ng = x^2\n@view plot x=x y=f, g\n@view plot x=x y="2*x + 1, x^2"\n'})}),(0,l.jsx)(i.p,{children:"With explicit domain:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"@view plot x=years domain=0..40\n"})}),(0,l.jsx)(i.p,{children:"Frozen auto domain:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"@view plot x=years domain=@auto(frozen)\n"})}),(0,l.jsx)(i.p,{children:"With viewport:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"@view plot x=years domain=0..40 view=5..25\n"})}),(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.code,{children:"view="})," only affects the X axis. Use ",(0,l.jsx)(i.code,{children:"yview="})," for Y."]}),(0,l.jsx)(i.p,{children:"With explicit Y domain:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"@view plot x=years ydomain=0..100000\n"})}),(0,l.jsx)(i.p,{children:"With explicit Y viewport:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"@view plot x=years yview=1000..8000\n"})}),(0,l.jsx)(i.p,{children:"Size:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"@view plot x=years size=lg\n"})}),(0,l.jsx)(i.p,{children:"Unnamed result:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"a + b => 20%\n@view plot x=a\n"})}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"6-binding-rules",children:"6. Binding Rules"}),(0,l.jsx)(i.h3,{id:"61-how-a-view-binds",children:"6.1 How a view binds"}),(0,l.jsx)(i.p,{children:"Internally, a view binds to:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["the ",(0,l.jsx)(i.strong,{children:"expression node ID"})," of the previous line"]}),"\n",(0,l.jsx)(i.li,{children:"not the textual line index"}),"\n"]}),(0,l.jsx)(i.p,{children:"This ensures:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"moving lines does not break views"}),"\n",(0,l.jsx)(i.li,{children:"edits preserve intent when possible"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"62-if-the-previous-line-changes",children:"6.2 If the previous line changes"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"If expression still exists \u2192 view updates"}),"\n",(0,l.jsxs)(i.li,{children:["If expression changes identity \u2192 view enters ",(0,l.jsx)(i.strong,{children:"Disconnected state"})]}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"7-view-lifecycle-states",children:"7. View Lifecycle States"}),(0,l.jsx)(i.h3,{id:"71-connected",children:"7.1 Connected"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Expression exists"}),"\n",(0,l.jsx)(i.li,{children:"Variable exists"}),"\n",(0,l.jsx)(i.li,{children:"Plot renders normally"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"72-disconnected",children:"7.2 Disconnected"}),(0,l.jsx)(i.p,{children:"Triggers:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"expression deleted"}),"\n",(0,l.jsx)(i.li,{children:"expression errors"}),"\n",(0,l.jsx)(i.li,{children:"variable missing or incompatible"}),"\n"]}),(0,l.jsx)(i.p,{children:"UI:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"Plot area remains"}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"Curve hidden or faded"}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"Header shows:"}),"\n",(0,l.jsxs)(i.blockquote,{children:["\n",(0,l.jsx)(i.p,{children:"\u26a0 Disconnected \u2014 expression unavailable"}),"\n"]}),"\n"]}),"\n"]}),(0,l.jsx)(i.p,{children:"Actions:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Reconnect"}),"\n",(0,l.jsx)(i.li,{children:"Change expression"}),"\n",(0,l.jsx)(i.li,{children:"Change variable"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"73-reconnection-mode",children:"7.3 Reconnection Mode"}),(0,l.jsx)(i.p,{children:"When user clicks a disconnected view:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"All valid expressions/results highlight"}),"\n",(0,l.jsx)(i.li,{children:"User clicks new Y"}),"\n",(0,l.jsx)(i.li,{children:"Then selects X"}),"\n"]}),(0,l.jsx)(i.p,{children:"View reconnects and resumes live updates."}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"8-domain-inference-rules",children:"8. Domain Inference Rules"}),(0,l.jsx)(i.h3,{id:"81-explicit-domain-always-wins",children:"8.1 Explicit domain always wins"}),(0,l.jsxs)(i.p,{children:["If ",(0,l.jsx)(i.code,{children:"domain="})," is specified, it is used verbatim."]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"82-auto-domain-inference-deterministic",children:"8.2 Auto domain inference (deterministic)"}),(0,l.jsx)(i.p,{children:"Auto domains must be:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"predictable"}),"\n",(0,l.jsx)(i.li,{children:"stable across reloads"}),"\n",(0,l.jsx)(i.li,{children:"unit-aware"}),"\n"]}),(0,l.jsx)(i.p,{children:"Rules:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Numeric: centered around current value, symmetric, clamped"}),"\n",(0,l.jsx)(i.li,{children:"Time (years, months): floor at 0 unless negative meaningful"}),"\n",(0,l.jsx)(i.li,{children:"Percentages: clamped to sensible bounds (never cross invalid zones silently)"}),"\n",(0,l.jsx)(i.li,{children:"Dates: calendar-aware window around current date"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"83-invalid-regions",children:"8.3 Invalid regions"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Curves break (no vertical jumps)"}),"\n",(0,l.jsx)(i.li,{children:"Invalid areas are not interpolated"}),"\n",(0,l.jsx)(i.li,{children:"Warnings are shown when necessary"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"9-pan--zoom",children:"9. Pan & Zoom"}),(0,l.jsx)(i.h3,{id:"91-conceptual-separation",children:"9.1 Conceptual separation"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Domain"})," = semantic range of X"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Viewport"})," = what the user is looking at"]}),"\n"]}),(0,l.jsxs)(i.p,{children:["Pan/zoom only affects the ",(0,l.jsx)(i.strong,{children:"viewport"}),"."]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"92-interaction",children:"9.2 Interaction"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Scroll = zoom X"}),"\n",(0,l.jsx)(i.li,{children:"Shift + scroll = pan"}),"\n",(0,l.jsx)(i.li,{children:"Small \u201cReset view\u201d control restores viewport to computed view (instead of the full domain)"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"93-persistence-rules",children:"9.3 Persistence rules"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"Pan/zoom is transient unless user commits it"}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"If user commits:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["viewport is serialized as ",(0,l.jsx)(i.code,{children:"view="})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"Domain never silently changes"}),"\n"]}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"94-freeze--commit-actions",children:"9.4 Freeze / Commit actions"}),(0,l.jsx)(i.p,{children:"Available in plot header:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"\u201cFreeze domain\u201d"}),"\n",(0,l.jsx)(i.li,{children:"\u201cSet domain from view\u201d"}),"\n",(0,l.jsx)(i.li,{children:"\u201cReset to auto\u201d"}),"\n"]}),(0,l.jsx)(i.p,{children:"These convert emergent state into declared text."}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"10-chart-size",children:"10. Chart Size"}),(0,l.jsx)(i.h3,{id:"101-sizes",children:"10.1 Sizes"}),(0,l.jsx)(i.p,{children:"Supported:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"sm"})}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"md"})," (default)"]}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"lg"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"xl"})}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"102-resizing-interaction",children:"10.2 Resizing interaction"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Hover plot \u2192 subtle resize grip"}),"\n",(0,l.jsx)(i.li,{children:"Drag vertically"}),"\n",(0,l.jsx)(i.li,{children:"Snaps to nearest size"}),"\n"]}),(0,l.jsx)(i.p,{children:"Size stored as:"}),(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-smartpad",children:"size=md\n"})}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"11-multiple-series--lists",children:"11. Multiple Series & Lists"}),(0,l.jsx)(i.h3,{id:"111-lists",children:"11.1 Lists"}),(0,l.jsx)(i.p,{children:"If X or Y is a list:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"plot"})," \u2192 line or bar (auto)"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"hist"})," \u2192 histogram"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"box"})," \u2192 box plot"]}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h3,{id:"112-multi-series-future-safe",children:"11.2 Multi-series (future-safe)"}),(0,l.jsxs)(i.p,{children:["Multiple expressions may be supported later via block syntax, but ",(0,l.jsx)(i.strong,{children:"not required for v1"}),"."]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"12-performance--reactivity",children:"12. Performance & Reactivity"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"Views update on any dependency change"}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"During scrubbing:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"sampling density reduced"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"After idle:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"full fidelity recompute"}),"\n"]}),"\n"]}),"\n"]}),(0,l.jsx)(i.p,{children:"Adaptive sampling is mandatory."}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"13-non-goals-explicit",children:"13. Non-Goals (Explicit)"}),(0,l.jsxs)(i.p,{children:["This feature does ",(0,l.jsx)(i.strong,{children:"not"}),":"]}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"introduce chart builders"}),"\n",(0,l.jsx)(i.li,{children:"introduce sliders"}),"\n",(0,l.jsx)(i.li,{children:"introduce dashboards"}),"\n",(0,l.jsx)(i.li,{children:"replace numeric results"}),"\n",(0,l.jsx)(i.li,{children:"hide ambiguity or invalid math"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"14-success-criteria",children:"14. Success Criteria"}),(0,l.jsx)(i.p,{children:"This feature is successful if:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"users explore without planning"}),"\n",(0,l.jsx)(i.li,{children:"insight appears faster than calculation"}),"\n",(0,l.jsxs)(i.li,{children:["plots feel like ",(0,l.jsx)(i.em,{children:"extensions of thought"})]}),"\n",(0,l.jsx)(i.li,{children:"nothing breaks silently"}),"\n",(0,l.jsx)(i.li,{children:"documents remain readable as plain text"}),"\n"]}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.h2,{id:"faq",children:"FAQ"}),(0,l.jsx)(i.h3,{id:"possible-confusion-clicking-vs-view-syntax--do-they-both-declare-a-view",children:"Possible Confusion: clicking vs @view syntax \u2014 do they both \u201cdeclare a view\u201d?"}),(0,l.jsx)(i.p,{children:"They serve different purposes:\nClicking creates a transient exploration view (think \u201cinspection mode\u201d).\n@view creates a persistent document view (a saved lens)."}),(0,l.jsx)(i.p,{children:"Clicking does not declare a persistent view by default\u2014because Smartpad shouldn\u2019t litter the document just because you looked at something.\nThe missing link: \u201cPin/Detach\u201d action\nClicking produces a transient plot; then the user can choose Detach View to insert the @view line."}),(0,l.jsx)(i.p,{children:"So:\nclick result \u2192 transient plot appears\nuser likes it \u2192 click \u201cDetach view\u201d\nSmartpad inserts @view ... line under the target expression\nnow it\u2019s persistent\nThat keeps the notebook clean and still lets people \u201ccommit insight\u201d."}),(0,l.jsx)(i.h2,{id:"15-summary",children:"15. Summary"}),(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.strong,{children:"Interactive Dependency Views"})," turn Smartpad from a calculator into a ",(0,l.jsx)(i.em,{children:"thinking surface"}),"."]}),(0,l.jsx)(i.p,{children:"They:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"respect impermanence"}),"\n",(0,l.jsx)(i.li,{children:"preserve intent"}),"\n",(0,l.jsx)(i.li,{children:"keep text authoritative"}),"\n",(0,l.jsx)(i.li,{children:"make exploration playful and fast"}),"\n",(0,l.jsx)(i.li,{children:"allow insight to be captured declaratively"}),"\n"]}),(0,l.jsx)(i.p,{children:"This spec is complete and sufficient for implementation."}),(0,l.jsx)(i.hr,{}),(0,l.jsx)(i.p,{children:"If you want, next step (optional) would be:"}),(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"a reference implementation outline (data structures + AST hooks)"}),"\n",(0,l.jsx)(i.li,{children:"or a designer-facing visual state diagram"}),"\n"]}),(0,l.jsxs)(i.p,{children:["But as requested: ",(0,l.jsx)(i.strong,{children:"this document stands on its own."})]})]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453(e,i,n){n.d(i,{R:()=>d,x:()=>t});var s=n(6540);const l={},r=s.createContext(l);function d(e){const i=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);