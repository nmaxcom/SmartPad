"use strict";(self.webpackChunksmartpad_docs=self.webpackChunksmartpad_docs||[]).push([[873],{4121(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"specs/liveresult","title":"SmartPad Live Result Spec","description":"This spec defines `Live result`, a mode where evaluable lines show their result while the user types, without requiring `=>`.","source":"@site/docs/specs/liveresult.md","sourceDirName":"specs","slug":"/specs/liveresult","permalink":"/docs/specs/liveresult","draft":false,"unlisted":false,"editUrl":"https://github.com/nmaxcom/SmartPad/tree/main/website/docs/specs/liveresult.md","tags":[],"version":"current","frontMatter":{"title":"SmartPad Live Result Spec","description":"This spec defines `Live result`, a mode where evaluable lines show their result while the user types, without requiring `=>`."}}');var l=i(4848),r=i(8453);const t={title:"SmartPad Live Result Spec",description:"This spec defines `Live result`, a mode where evaluable lines show their result while the user types, without requiring `=>`."},c=void 0,d={},o=[{value:"0) Goals",id:"0-goals",level:2},{value:"1) Setting",id:"1-setting",level:2},{value:"2) Core Behavior",id:"2-core-behavior",level:2},{value:"2.1 Trigger rule",id:"21-trigger-rule",level:3},{value:"2.2 Success-only rendering",id:"22-success-only-rendering",level:3},{value:"2.3 Keep explicit <code>=&gt;</code> semantics",id:"23-keep-explicit--semantics",level:3},{value:"3) Line Eligibility (What Live Result Should Ignore)",id:"3-line-eligibility-what-live-result-should-ignore",level:2},{value:"4) State and Side-Effect Safety",id:"4-state-and-side-effect-safety",level:2},{value:"5) Debounce and Timing",id:"5-debounce-and-timing",level:2},{value:"6) Visual Treatment",id:"6-visual-treatment",level:2},{value:"7) Unknown Variables and Incomplete Input",id:"7-unknown-variables-and-incomplete-input",level:2},{value:"8) Counters / Observability",id:"8-counters--observability",level:2},{value:"9) Acceptance Criteria",id:"9-acceptance-criteria",level:2},{value:"10) Test Plan",id:"10-test-plan",level:2},{value:"10.1 Unit tests",id:"101-unit-tests",level:3},{value:"10.2 Integration tests",id:"102-integration-tests",level:3},{value:"11) Out of Scope (V1)",id:"11-out-of-scope-v1",level:2}];function h(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["Source: ",(0,l.jsx)(n.code,{children:"docs/Specs/LiveResult.spec.md"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["This spec defines ",(0,l.jsx)(n.code,{children:"Live result"}),", a mode where evaluable lines show their result while the user types, without requiring ",(0,l.jsx)(n.code,{children:"=>"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:["The intent is to reduce repetitive ",(0,l.jsx)(n.code,{children:"=>"})," usage for common calculations while preserving explicit-trigger behavior for workflows that rely on ",(0,l.jsx)(n.code,{children:"=>"})," (for example, explicit error surfacing and solve/equation flows)."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"0-goals",children:"0) Goals"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Show results for common evaluable lines without needing ",(0,l.jsx)(n.code,{children:"=>"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Keep ",(0,l.jsx)(n.code,{children:"=>"})," behavior fully intact and authoritative."]}),"\n",(0,l.jsx)(n.li,{children:"Avoid noisy UX while typing by suppressing live errors."}),"\n",(0,l.jsx)(n.li,{children:"Keep performance and rendering stable by reusing existing debounce behavior."}),"\n",(0,l.jsx)(n.li,{children:"Add counters so we can observe how often Live result helps vs gets suppressed."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"1-setting",children:"1) Setting"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Add a boolean setting: ",(0,l.jsx)(n.code,{children:"liveResultEnabled"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Default: ",(0,l.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"Scope: user/app setting (same level as other evaluation display settings)."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain meaning:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Users get Live result out of the box."}),"\n",(0,l.jsx)(n.li,{children:"If they prefer current behavior, they can turn it off."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"2-core-behavior",children:"2) Core Behavior"}),"\n",(0,l.jsx)(n.h3,{id:"21-trigger-rule",children:"2.1 Trigger rule"}),"\n",(0,l.jsx)(n.p,{children:"Technical:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Live result is considered only for lines ",(0,l.jsx)(n.strong,{children:"without"})," ",(0,l.jsx)(n.code,{children:"=>"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["If the user already typed ",(0,l.jsx)(n.code,{children:"=>"}),", that line is handled the normal way only."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Example:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"3*4"})," -> Live result can show ",(0,l.jsx)(n.code,{children:"12"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"3*4 =>"})," -> only explicit result is shown."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"22-success-only-rendering",children:"2.2 Success-only rendering"}),"\n",(0,l.jsx)(n.p,{children:"Technical:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Render live output only when evaluation returns a concrete successful result."}),"\n",(0,l.jsx)(n.li,{children:"Do not render live output for parse/runtime/unresolved/incomplete states."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Show answers, hide problems while typing."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Examples:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"4lb to kg"})," -> show converted result."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"4lb to"})," -> show nothing (not yet complete)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"unknownVar + 2"})," -> show nothing (not resolvable yet)."]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"23-keep-explicit--semantics",children:["2.3 Keep explicit ",(0,l.jsx)(n.code,{children:"=>"})," semantics"]}),"\n",(0,l.jsx)(n.p,{children:"Technical:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Explicit trigger path remains unchanged (including current error/solve behaviors)."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"=>"})," still behaves exactly like today and still shows errors when explicitly requested."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"3-line-eligibility-what-live-result-should-ignore",children:"3) Line Eligibility (What Live Result Should Ignore)"}),"\n",(0,l.jsx)(n.p,{children:"Technical:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Exclude lines that are clearly non-expression content (plain text/comments/directives)."}),"\n",(0,l.jsx)(n.li,{children:"Exclude lines where adding live output would create duplicate rendering on the same line."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Do not compute notes."}),"\n",(0,l.jsx)(n.li,{children:"Do not show two answers on one line."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Examples:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"buy milk"})," -> no live result."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"# todo"})," -> no live result."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"2+2 =>"})," -> no extra live result layered on top."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"4-state-and-side-effect-safety",children:"4) State and Side-Effect Safety"}),"\n",(0,l.jsx)(n.p,{children:"Technical:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Live result evaluation must not introduce new state mutations outside existing behavior."}),"\n",(0,l.jsx)(n.li,{children:"Preserve current assignment semantics exactly; do not change write timing because of live preview."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Live result is for display, not for secretly changing app data."}),"\n",(0,l.jsx)(n.li,{children:"If assignment behavior already exists in current pipeline, keep it as-is; Live result must not make it earlier/later/different."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Examples:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Typing ",(0,l.jsx)(n.code,{children:"2+3"})," should only show ",(0,l.jsx)(n.code,{children:"5"}),", not create/update variables."]}),"\n",(0,l.jsxs)(n.li,{children:["If current non-",(0,l.jsx)(n.code,{children:"=>"})," assignment flow already stores ",(0,l.jsx)(n.code,{children:"x = 5"}),", keep that behavior; Live result must not alter that contract."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"5-debounce-and-timing",children:"5) Debounce and Timing"}),"\n",(0,l.jsx)(n.p,{children:"Technical:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Reuse the same debounce mechanism and timing used by current result updates during typing."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Live result should feel like existing edit-to-result responsiveness users already know."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"6-visual-treatment",children:"6) Visual Treatment"}),"\n",(0,l.jsx)(n.p,{children:"Technical:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Live result uses a distinct color token from explicit result output."}),"\n",(0,l.jsx)(n.li,{children:"No extra badge/label in V1."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:['Same answer area, slightly different color so users can tell "preview while typing" from explicit ',(0,l.jsx)(n.code,{children:"=>"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"7-unknown-variables-and-incomplete-input",children:"7) Unknown Variables and Incomplete Input"}),"\n",(0,l.jsx)(n.p,{children:"Technical:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Unknown/unresolved identifiers in live mode should suppress output (not show error)."}),"\n",(0,l.jsx)(n.li,{children:"Incomplete syntax should suppress output."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If the line is unfinished or missing definitions, stay quiet until it becomes valid."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Examples:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"a+b"})," when ",(0,l.jsx)(n.code,{children:"a"})," is undefined -> no live result."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"(3+"})," -> no live result."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"9L/min * 18 min"})," -> show ",(0,l.jsx)(n.code,{children:"162 L"})," when complete."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"8-counters--observability",children:"8) Counters / Observability"}),"\n",(0,l.jsx)(n.p,{children:"Add counters for behavior and tuning:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"live_result_evaluated_total"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"live_result_rendered_total"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"live_result_suppressed_plaintext_total"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"live_result_suppressed_incomplete_total"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"live_result_suppressed_error_total"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"live_result_suppressed_unresolved_total"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"live_result_eval_ms"})," (timer/histogram/avg)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Plain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"These tell us if the feature is helpful, too strict, noisy, or slow."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"9-acceptance-criteria",children:"9) Acceptance Criteria"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["With ",(0,l.jsx)(n.code,{children:"liveResultEnabled = true"}),", ",(0,l.jsx)(n.code,{children:"3"})," shows a live result ",(0,l.jsx)(n.code,{children:"3"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["With ",(0,l.jsx)(n.code,{children:"liveResultEnabled = true"}),", ",(0,l.jsx)(n.code,{children:"3*4"})," shows ",(0,l.jsx)(n.code,{children:"12"})," without ",(0,l.jsx)(n.code,{children:"=>"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["With ",(0,l.jsx)(n.code,{children:"liveResultEnabled = true"}),", ",(0,l.jsx)(n.code,{children:"4lb to kg"})," shows live converted value."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"3*"})," shows no live output and no live error."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"unknownVar + 1"})," shows no live output and no live error."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"2+2 =>"})," shows only explicit result style/output (no double render)."]}),"\n",(0,l.jsx)(n.li,{children:"Turning setting off disables all live previews."}),"\n",(0,l.jsx)(n.li,{children:"Live result color differs from explicit result color."}),"\n",(0,l.jsx)(n.li,{children:"Debounce behavior matches existing typing/result cadence."}),"\n",(0,l.jsx)(n.li,{children:"Counters increment on expected paths (rendered vs suppression reasons)."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"10-test-plan",children:"10) Test Plan"}),"\n",(0,l.jsx)(n.h3,{id:"101-unit-tests",children:"10.1 Unit tests"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Eligibility classification (expression vs plaintext/comment/directive)."}),"\n",(0,l.jsxs)(n.li,{children:["Suppression reasons:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"incomplete input"}),"\n",(0,l.jsx)(n.li,{children:"unresolved identifier"}),"\n",(0,l.jsx)(n.li,{children:"evaluation error"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Success-path rendering for plain math and unit conversion expressions."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"102-integration-tests",children:"10.2 Integration tests"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"End-to-end typing flow with debounce."}),"\n",(0,l.jsxs)(n.li,{children:["No double-render on lines with explicit ",(0,l.jsx)(n.code,{children:"=>"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"Toggle on/off behavior."}),"\n",(0,l.jsx)(n.li,{children:"Visual token application for live-result color."}),"\n",(0,l.jsx)(n.li,{children:"Counter increments for render and suppression reasons."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"11-out-of-scope-v1",children:"11) Out of Scope (V1)"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Live error visualization."}),"\n",(0,l.jsx)(n.li,{children:"Additional preview badges/tooltips."}),"\n",(0,l.jsxs)(n.li,{children:["Changes to explicit ",(0,l.jsx)(n.code,{children:"=>"})," semantics."]}),"\n",(0,l.jsx)(n.li,{children:"Behavior changes to assignment persistence model."}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>c});var s=i(6540);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);